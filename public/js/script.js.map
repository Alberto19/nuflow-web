{"version":3,"names":[],"mappings":"","sources":["script.js"],"sourcesContent":["(function () {\r\n    'use strict';\r\n\r\n    angular.module('app', [\r\n        'ui.materialize',\r\n        'ui.router',\r\n        'ngResource',\r\n        'satellizer',\r\n        'ngFileUpload'\r\n        ])\r\n        .config(['$httpProvider',($httpProvider)=>{\r\n            // Add http interceptors\r\n            $httpProvider.interceptors.push('authInterceptor');\r\n        }])\r\n        .run(['$rootScope', '$state', 'authData', ($rootScope, $state, authData)=> {\r\n            // Page changed event\r\n            $rootScope.$on('$stateChangeStart', (event, next, current)=> {\r\n                let token = authData.getToken();\r\n\r\n                var regex = new RegExp(\"[^(init)]\\.[a-zA-Z]+\");\r\n                console.log(next.name.replace(regex, \"\"));\r\n\r\n                if (!token && next.name.replace(regex, next.name) == 'main.*') {\r\n                    event.preventDefault();\r\n                    $state.go('init.login');\r\n                }\r\n            });\r\n\r\n            // Global forbidden event\r\n            $rootScope.$on('forbidden', ()=> {\r\n                // Force redirect to login again\r\n                $state.go('init.login');\r\n            });\r\n        }]);\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .config(['$locationProvider', '$stateProvider', '$urlRouterProvider', ($locationProvider, $stateProvider, $urlRouterProvider)=> {\r\n            // Use URLs without hash\r\n            $locationProvider.html5Mode(true);\r\n\r\n            // Login routes\r\n            $stateProvider\r\n                .state({\r\n                    abstract: true,\r\n                    name:'init',\r\n                    url: '',\r\n                    templateUrl: 'views/layouts/init.html'\r\n                })\r\n            $stateProvider\r\n                .state({\r\n                    name:'init.login',\r\n                    url: '/',\r\n                    controller: 'LoginController as vm',\r\n                    templateUrl: 'views/layouts/login.html'\r\n                })\r\n                .state({\r\n                    name:'init.regiterUser',\r\n                    url: '/cadastro',\r\n                    controller: 'RegisterController as vm',\r\n                    templateUrl: 'views/layouts/register.html'\r\n                })\r\n                .state({\r\n                    name:'init.registerCompany',\r\n                    url: '/cadastroCompany',\r\n                    controller: 'RegisterCompanyController as vm',\r\n                    templateUrl: 'views/layouts/registerCompany.html'\r\n                })\r\n\r\n                // Home routes\r\n                .state('main', {\r\n                    abstract: true,\r\n                    url: '',\r\n                    controller: 'LayoutController as vm',\r\n                    templateUrl: 'views/layouts/main.html',\r\n                })\r\n                 .state('main.feed', {\r\n                    url: '/feed',\r\n                    controller: 'FeedController as vm',\r\n                    templateUrl: 'views/partials/feed.html',\r\n                })\r\n                .state('main.profile', {\r\n                    url: '/profile',\r\n                    controller: 'ProfileController as vm',\r\n                    templateUrl: 'views/partials/profile.html',\r\n                })\r\n                .state('main.profileCompany', {\r\n                    url: '/profileCompany',\r\n                    controller: 'ProfileCompanyController as vm',\r\n                    templateUrl: 'views/partials/profileCompany.html',\r\n                })\r\n                .state('main.event', {\r\n                    url: '/event',\r\n                    controller: 'EventController as vm',\r\n                    templateUrl: 'views/partials/event.html',\r\n                })\r\n                .state('main.events', {\r\n                    url: '/events',\r\n                    controller: 'AllEventsController as vm',\r\n                    templateUrl: 'views/partials/allEvents.html',\r\n                })\r\n                .state('main.test', {\r\n                    url: '/test',\r\n                    controller: 'TestController as vm',\r\n                    templateUrl: 'views/partials/test.html',\r\n                })\r\n        }]);\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('config', config);\r\n\r\n    function config() {\r\n        return {\r\n            // baseApiUrl: \"https://nuflow.herokuapp.com/api\"\r\n            baseApiUrl: \"http://localhost:3000/api\"\r\n        };\r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('auth', auth);\r\n\r\n    auth.$inject = ['$http', 'authData', 'config'];\r\n\r\n    function auth($http, authData, config) {\r\n        var service = {\r\n            login: login,\r\n            register: register,\r\n            getPhoto: getPhoto,\r\n            logout: logout\r\n        };\r\n\r\n        return service;\r\n\r\n        ////////////////\r\n        function login(auth) {\r\n            return $http.post(`${config.baseApiUrl}/auth/login`, auth)\r\n                .then(result => {\r\n                        var loginData = result.data;\r\n                        authData.parseData(loginData);\r\n                        return loginData;\r\n                    },\r\n                    (error) => {\r\n                        if (error.status == 404) {\r\n                            Materialize.toast(error.data, 3000);\r\n                        }\r\n                        if (error.status == 401) {\r\n                            Materialize.toast(error.data, 3000);\r\n                        }\r\n                        return error;\r\n                    });\r\n        };\r\n\r\n        function register(user) {\r\n            return $http.post(`${config.baseApiUrl}/auth/cadastrar`, user)\r\n                .then((result) => {\r\n                    var registerData = result.data;\r\n                    authData.parseData(registerData);\r\n                    return result.data;\r\n                }, (error) => {\r\n                    return error;\r\n                });\r\n        };\r\n\r\n        function getPhoto() {\r\n            return $http.get(`${config.baseApiUrl}/auth/photo`)\r\n                .then((result) => {\r\n                    return result.data;\r\n                }, (error) => {\r\n                    return error;\r\n                });\r\n        };\r\n\r\n\r\n        function logout() {\r\n            authData.clearData();\r\n        };\r\n    }\r\n})();\n(function () {\r\n\t'use strict';\r\n\r\n\tangular\r\n\t\t.module('app')\r\n\t\t.factory('authData', authData);\r\n\r\n\tauthData.$inject = [];\r\n\r\n\tfunction authData() {\r\n\t\t/** Cached Instances **/\r\n\t\tvar cachedToken = null;\r\n\r\n\t\t/* Service */\r\n\t\tvar service = {\r\n\t\t\tparseData: parseData,\r\n\t\t\tclearData: clearData,\r\n\r\n\t\t\tgetToken: getToken,\r\n\t\t\tsetToken: setToken,\r\n\t\t};\r\n\r\n\t\treturn service;\r\n\r\n\t\t////////////////\r\n\r\n\t\t/* Login Data */\r\n\t\tfunction parseData(data) {\r\n\t\t\tsetToken(data.token);\r\n\t\t}\r\n\r\n\t\tfunction clearData() {\r\n\t\t\tsetToken();\r\n\t\t}\r\n\r\n\t\t/* API Token - Value */\r\n\t\tfunction getToken() {\r\n\t\t\tif (!cachedToken) {\r\n\t\t\t\tvar value = localStorage.getItem('token');\r\n\t\t\t\tcachedToken = value ? value : null;\r\n\t\t\t}\r\n\r\n\t\t\treturn cachedToken;\r\n\t\t}\r\n\r\n\t\tfunction setToken(token) {\r\n\t\t\tcachedToken = token;\r\n\r\n\t\t\tif (token) {\r\n\t\t\t\tlocalStorage.setItem('token', token);\r\n\t\t\t}else{\r\n\t\t\tlocalStorage.removeItem('token');\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t}\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('authInterceptor', authInterceptor);\r\n\r\n    authInterceptor.$inject = ['$rootScope', '$q', 'authData'];\r\n\r\n    function authInterceptor($rootScope, $q, authData) {\r\n        var service = {\r\n            request: request,\r\n            responseError: responseError\r\n        };\r\n\r\n        return service;\r\n\r\n        ////////////////\r\n\r\n        function request(config) {\r\n            var token = authData.getToken();\r\n\r\n            // Inject API token on all requests\r\n            if (token) {\r\n                config.headers['x-access-token'] = token;\r\n            }\r\n\r\n            return config;\r\n        }\r\n\r\n        function responseError(response) {\r\n            // Forbidden response\r\n            if (response.status == 403) {\r\n                // Remove login data\r\n                authData.clearData();\r\n\r\n                // Emit global forbidden event\r\n                $rootScope.$emit('forbidden');\r\n            }\r\n\r\n            return $q.reject(response);\r\n        }\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('Events', Events);\r\n\r\n    Events.$inject = ['$http', 'config', 'Upload', '$q'];\r\n\r\n    function Events($http, config, Upload, $q) {\r\n        var service = {\r\n            getEventById: getEventById,\r\n            createEvent: createEvent,\r\n            updateEvent: updateEvent,\r\n            uploadBanner: uploadBanner,\r\n            getBanner: getBanner,\r\n            getAllEvents: getAllEvents,\r\n        };\r\n\r\n        return service;\r\n\r\n        ////////////////\r\n        function getEventById() {\r\n            return $http.get(`${config.baseApiUrl}/event/:id`);\r\n        };\r\n\r\n        function createEvent(event) {\r\n            return $http.post(`${config.baseApiUrl}/event`, event);\r\n        };\r\n\r\n        function updateEvent(event) {\r\n            return $http.put(`${config.baseApiUrl}/event/update`, event);\r\n        };\r\n\r\n        function getBanner(eventId) {\r\n            var defer = $q.defer()\r\n            debugger\r\n            $http.post(`${config.baseApiUrl}/event/banner`, {\r\n                id: eventId\r\n            }).then(res => {\r\n                debugger\r\n                defer.resolve(res);\r\n            });\r\n            return defer.promise;\r\n        };\r\n\r\n        function uploadBanner(id, banner) {\r\n            debugger\r\n            return Upload.upload({\r\n                url: `${config.baseApiUrl}/event/uploadBanner`,\r\n                data: {\r\n                    file: banner,\r\n                    id: id\r\n                }\r\n            });\r\n        }\r\n\r\n        function getAllEvents() {\r\n            return $http.get(`${config.baseApiUrl}/event`);\r\n        }\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .factory('Profile', Profile);\r\n\r\n    Profile.$inject = ['$http', 'config', 'Upload'];\r\n\r\n    function Profile($http, config, Upload) {\r\n        var service = {\r\n            getProfile: getProfile,\r\n            updateProfile: updateProfile,\r\n            uploadPhoto: uploadPhoto\r\n        };\r\n\r\n        return service;\r\n\r\n        ////////////////\r\n        function getProfile() {\r\n            return $http.get(config.baseApiUrl + '/user/profile');\r\n        };\r\n\r\n        function updateProfile(profile) {\r\n            debugger\r\n            return $http.post(`${config.baseApiUrl}/user/updateProfile`, profile);\r\n        };\r\n\r\n        function uploadPhoto(photo){\r\n            return Upload.upload({\r\n                url: `${config.baseApiUrl}/auth/uploadPhoto`,\r\n                data: { file: photo }\r\n            });\r\n        }\r\n        // function getProfile(Profile) {\r\n        //     return $http.get(config.baseApiUrl + '/Profile/edit/' + Profile);\r\n        // }\r\n        // function editar(Profile) {\r\n        //     return $http.post(config.baseApiUrl + '/Profile/editar/', Profile);\r\n        // }\r\n        // function deletar(Profile) {\r\n        //     return $http.post(config.baseApiUrl + '/Profile/delete/' + Profile);\r\n        // }\r\n    }\r\n})();\n(function () {\n    'use strict';\n\n    angular\n        .module('app')\n        .factory('ProfileCompany', ProfileCompany);\n\n    ProfileCompany.$inject = ['$http', 'config', 'Upload'];\n\n    function ProfileCompany($http, config, Upload) {\n        var service = {\n            getProfileCompany: getProfileCompany,\n            updateProfileCompany: updateProfileCompany,\n            uploadPhoto: uploadPhoto\n        };\n\n        return service;\n\n        ////////////////\n        function getProfileCompany() {\n            return $http.get(config.baseApiUrl + '/company/ProfileCompany');\n        };\n\n        function updateProfileCompany(ProfileCompany) {\n            debugger\n            return $http.post(`${config.baseApiUrl}/company/updateProfileCompany`, ProfileCompany);\n        };\n\n        function uploadPhoto(photo){\n            return Upload.upload({\n                url: `${config.baseApiUrl}/auth/uploadPhoto`,\n                data: { file: photo }\n            });\n        }\n    }\n})();\n(function () {\n    'use strict';\n\n    angular\n        .module('app')\n        .factory('Search', Search);\n\n    Search.$inject = ['$http', 'config'];\n\n    function Search($http, config) {\n        var service = {\n            searchLocations: searchLocations,\n        };\n        return service;\n\n        ////////////////\n\n        function searchLocations(location){\n            return $http.post(config.baseApiUrl + '/search/places', location);\n        };\n    }\n})();\n\n(function () {\r\n  'use strict';\r\n\r\n  // Usage:\r\n  // \r\n  // Creates:\r\n  // \r\n\r\n  angular\r\n    .module('app')\r\n    .component('balada', {\r\n      templateUrl: 'components/html/balada.component.html',\r\n      controller: BaladaController,\r\n      bindings: {\r\n        name: '=',\r\n        adress: '=',\r\n        phone: '=',\r\n        rating: '=',\r\n        site: '=',\r\n        mapsUrl: '=',\r\n        days: '=',\r\n        reviews: '=',\r\n        photos: '=',\r\n        locationuser: '=',\r\n        location: '=',\r\n      },\r\n    }).directive('starRating', starRating);\r\n\r\n  //NavigationController.$inject = ['dependency1'];\r\n  function BaladaController() {\r\n    var $ctrl = this;\r\n    $ctrl.isReadonly = true;\r\n    $ctrl.distance = 0;\r\n\r\n    // alert($ctrl.locationuser);\r\n    // let lat1 = $ctrl.locationuser[0];\r\n    // let lon1 = $ctrl.locationuser[1];\r\n    // let lat2 = $ctrl.location[0];\r\n    // let lon2 = $ctrl.location[1];\r\n    \r\n\r\n    function distancia() {\r\n      var R = 6371;\r\n      var dLat = ($ctrl.location[0] - $ctrl.locationuser[0]) * (Math.PI / 180);\r\n      var dLon = ($ctrl.location[1] - $ctrl.locationuser[1]) * (Math.PI / 180);\r\n      var a =\r\n        Math.sin(dLat / 2) * Math.sin(dLat / 2) +\r\n        Math.cos($ctrl.location[0] * (Math.PI / 180)) * Math.cos($ctrl.location[0] * (Math.PI / 180)) *\r\n        Math.sin(dLon / 2) * Math.sin(dLon / 2);\r\n      var c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\r\n      var d = R * c;\r\n      $ctrl.distance = Math.floor(d);\r\n    };\r\n\r\n\r\n    ////////////////\r\n\r\n    $ctrl.$onInit = function () {\r\n      distancia();\r\n    };\r\n    $ctrl.$onChanges = function (changesObj) {};\r\n    $ctrl.$onDestory = function () {};\r\n  }\r\n\r\n  function starRating() {\r\n    return {\r\n      restrict: 'EA',\r\n      template: `<ul class=\"star-rating\" ng-class=\"{readonly: readonly}\">\r\n          <li ng-repeat=\"star in stars\" class=\"star\" ng-class=\"{filled: star.filled}\" ng-click=\"toggle($index)\">\r\n            <i class=\"material-icons\">stars</i>\r\n          </li>\r\n        </ul>`,\r\n      scope: {\r\n        ratingValue: '=ngModel',\r\n        max: '=?', // optional (default is 5)\r\n        onRatingSelect: '&?',\r\n        readonly: '=?'\r\n      },\r\n      link: function (scope, element, attributes) {\r\n        if (scope.max == undefined) {\r\n          scope.max = 5;\r\n        }\r\n\r\n        function updateStars() {\r\n          scope.stars = [];\r\n          for (var i = 0; i < scope.max; i++) {\r\n            scope.stars.push({\r\n              filled: i < scope.ratingValue\r\n            });\r\n          }\r\n        };\r\n        scope.toggle = function (index) {\r\n          if (scope.readonly == undefined || scope.readonly === false) {\r\n            scope.ratingValue = index + 1;\r\n            scope.onRatingSelect({\r\n              rating: index + 1\r\n            });\r\n          }\r\n        };\r\n        scope.$watch('ratingValue', function (oldValue, newValue) {\r\n          if (newValue) {\r\n            updateStars();\r\n          }\r\n        });\r\n      }\r\n    };\r\n  }\r\n})();\n(function($) {\r\n'use strict';\r\n\tangular\r\n\t\t.module('app')\r\n\t\t.component('navigation', {\r\n\t\t\ttemplateUrl:'components/html/navigation.component.html',\r\n\t\t\tcontroller: NavigationController,\r\n\t\t\tbindings: {\r\n\t\t\t\tshow: '=',\r\n\t\t\t},\r\n\t\t});\r\n\r\n\tNavigationController.$inject = ['auth','$rootScope', 'Profile', 'ProfileCompany'];\r\n\tfunction NavigationController(auth, $rootScope, Profile, ProfileCompany) {\r\n\t\tvar $ctrl = this;\r\n\t\t$ctrl.getProfile = getProfile;\r\n\t\t$ctrl.user = {\r\n\t\t\tname: null,\r\n\t\t\temail: null,\r\n\t\t\tpicture: null\r\n\t\t};\r\n\r\n\t\t$ctrl.logout = ()=>{\r\n\t\t\tauth.logout();\r\n\t\t\t$rootScope.$emit('forbidden');\r\n\t\t};\r\n\t\t// if(localStorage.getItem('token') != null){\r\n\t\t// $ctrl.getProfile();\r\n\t\t// }\r\n\r\n\t\tfunction getProfile() {\r\n\t\t\tProfile.getProfile().then(user => {\r\n\t\t\t\t$ctrl.user.email = user.data.email;\r\n\t\t\t\t$ctrl.user.name = user.data.name;\r\n\t\t\t\t$ctrl.user.picture = user.data.picture;\r\n\t\t\t});\r\n\t\t};\r\n\r\n\r\n\t\t\r\n\r\n\t\t////////////////\r\n\r\n\t\t$ctrl.$onInit = function() { };\r\n\t\t$ctrl.$onChanges = function(changesObj) { };\r\n\t\t$ctrl.$onDestory = function() { };\r\n\t}\r\n})(jQuery);\n(function () {\r\n        'use strict';\r\n        angular\r\n            .module('app')\r\n            .controller('AllEventsController', AllEventsController);\r\n\r\n        AllEventsController.$inject = ['$state', 'Events', '$q'];\r\n\r\n        function AllEventsController($state, Events, $q) {\r\n            var vm = this;\r\n            vm.events = null;\r\n\r\n            vm.createEvent = createEvent;\r\n            getEvents();\r\n\r\n            function getEvents() {\r\n                Events.getAllEvents().then(events => {\r\n                    debugger\r\n                    getBanners(events.data).then(dataEvents => {\r\n                        debugger\r\n                        vm.events = dataEvents;\r\n                    })\r\n                });\r\n            };\r\n\r\n            function getBanners(dataEvents) {\r\n                var events = [];\r\n                var defer = $q.defer();\r\n                dataEvents.map(event => {\r\n                    Events.getBanner(event._id).then(banner => {\r\n                        debugger\r\n                        event.banner = banner.data;\r\n                        defer.resolve(dataEvents);\r\n                    });\r\n                });\r\n            return defer.promise;\r\n            };\r\n\r\n        function createEvent() {\r\n            $state.go('main.event');\r\n        }\r\n    }\r\n})();\n(function () {\r\n    'use strict';\r\n    angular\r\n        .module('app')\r\n        .controller('EventController', EventController);\r\n\r\n    EventController.$inject = ['$state', 'Events'];\r\n\r\n    function EventController($state, Events) {\r\n        var vm = this;\r\n        vm.event = {\r\n            name: null,\r\n            type: null,\r\n            dateEvent: new Date(),\r\n            price: null,\r\n            description: null,\r\n            artists: null,\r\n            banner: null,\r\n            checkIn: null,\r\n            file: null,\r\n            id: null,\r\n        };\r\n        vm.showEvent = true;\r\n        vm.showBanner = false;\r\n\r\n        var days = 15;\r\n        vm.date = {\r\n            month: ['Janeiro', 'Fevereiro', 'Março', 'Abril', 'Maio', 'Junho', 'Julho', 'Agosto', 'Setembro', 'Outubro', 'Novembro', 'Dezembro'],\r\n            monthShort: ['Jan', 'Fev', 'Mar', 'Abr', 'Mai', 'Jun', 'Jul', 'Ago', 'Set', 'Out', 'Nov', 'Dez'],\r\n            weekdaysFull: ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sabado'],\r\n            weekdaysLetter: ['D', 'S', 'T', 'Q', 'QU', 'SE', 'Sab'],\r\n            disable: [false, 1, 7],\r\n            today: 'Hoje',\r\n            clear: 'Limpar',\r\n            close: 'Fechar',\r\n            minDate: (new Date(vm.event.dateEvent.getTime() - (1000 * 60 * 60 * 24 * days))).toISOString(),\r\n            maxDate: (new Date(vm.event.dateEvent.getTime() + (1000 * 60 * 60 * 24 * days))).toISOString(),\r\n        };\r\n\r\n        vm.onStart = function () {};\r\n        vm.onRender = function () {};\r\n        vm.onOpen = function () {};\r\n        vm.onClose = function () {};\r\n        vm.onSet = function () {};\r\n        vm.onStop = function () {};\r\n\r\n        vm.getEvent = getEvent;\r\n        vm.createEvent = createEvent;\r\n        vm.updateEvent = updateEvent;\r\n        vm.uploadBanner = uploadBanner;\r\n\r\n        // getEvent();\r\n\r\n        function createEvent() {\r\n            Events.createEvent(vm.event).then(event => {\r\n                if (event.data.token === null) {\r\n                    $state.go('main.event');\r\n                } else {\r\n                    vm.event.id = event.data.eventId;\r\n                    vm.showEvent = false;\r\n                    vm.showBanner = true;\r\n                }\r\n            });\r\n        }\r\n\r\n        function getEvent() {\r\n            Events.getEvent().then(event => {\r\n                vm.event.name = event.data.name;\r\n                vm.event.type = event.data.type;\r\n                vm.event.dateEvent = event.data.dateEvent;\r\n                vm.event.price = event.data.price;\r\n                vm.event.description = event.data.description;\r\n                vm.event.artists = event.data.artists;\r\n                vm.event.checkIn = event.data.checkIn;\r\n                Events.getBanner().then(banner => {\r\n                    vm.event.banner = banner;\r\n                });\r\n            });\r\n        };\r\n\r\n        function updateEvent() {\r\n            if (vm.event.banner != null) {\r\n                vm.event.banner = null;\r\n                vm.event.file = null;\r\n            }\r\n            Events.updateEvent(vm.event).then((result) => {\r\n                    Materialize.toast(result.message, 3000);\r\n                },\r\n                (err) => {\r\n                    Materialize.toast(err.message, 3000);\r\n                });\r\n        };\r\n\r\n        function uploadBanner() {\r\n            Events.uploadBanner(vm.event.id, vm.event.file).then(() => {\r\n                Events.getBanner(vm.event.id).then(banner => {\r\n                    vm.event.banner = banner.data;\r\n                });\r\n                Materialize.toast('Banner Atualizado com sucesso', 3000);\r\n            });\r\n        }\r\n\r\n    }\r\n})();\n(function ($) {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('FeedController', FeedController);\r\n\r\n    FeedController.$inject = ['$state', 'Search'];\r\n\r\n    function FeedController($state, Search) {\r\n        var vm = this;\r\n        vm.locations = null;\r\n        vm.radius = 90000;\r\n        vm.location = null;\r\n\r\n        if (navigator.geolocation) {\r\n            navigator\r\n                .geolocation\r\n                .getCurrentPosition((position) => {\r\n                    vm.location = [position.coords.latitude, position.coords.longitude];\r\n                    vm.radius /= 6371;\r\n                    let find = {\r\n                        location: vm.location,\r\n                        radius: vm.radius,\r\n                        keyword: 'C'\r\n                    };\r\n                    Search.searchLocations(find).then(\r\n                        (result) => {\r\n                            console.log(result);\r\n                            vm.locations = result.data;\r\n                        },\r\n                        () => {\r\n\r\n                        }\r\n                    );\r\n                });\r\n        } else {\r\n            alert(\"Geolocation is not supported by this browser.\");\r\n        };\r\n\r\n\r\n    }\r\n})(jQuery);\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('LayoutController', LayoutController);\r\n\r\n    LayoutController.$inject = ['auth', '$state'];\r\n\r\n    function LayoutController(auth, $state) {\r\n        var vm = this;\r\n\r\n        vm.logout = logout;\r\n        vm.desejos = desejos;\r\n\r\n        function logout() {\r\n            auth.logout();\r\n            $state.go('login');\r\n        }\r\n        function desejos() {\r\n            $state.go('login');\r\n        }\r\n       \r\n    }\r\n})();\r\n\n(function () {\r\n    'use strict';\r\n\r\n    angular\r\n        .module('app')\r\n        .controller('LoginController', LoginController);\r\n\r\n    LoginController.$inject = ['$state', 'auth'];\r\n\r\n    function LoginController($state, auth) {\r\n        var vm = this;\r\n        vm.auth = {\r\n            email: null,\r\n            password: null\r\n        }\r\n\r\n        vm.login = login;\r\n        ////////////////\r\n\r\n        function login() {\r\n            auth.login(vm.auth)\r\n                .then((result) => {\r\n                    if (result.status != 401 && result.status != 404) {\r\n                        debugger\r\n                        if(result.auth.type === 'user'){\r\n                            if (result.auth.completed === false) {\r\n                                $state.go('main.profile');\r\n                            } else {\r\n                                $state.go('main.feed');\r\n                            }\r\n                        }else{\r\n                             if (result.auth.completed === false) {\r\n                                $state.go('main.profileCompany');\r\n                            } else {\r\n                                $state.go('main.feed');\r\n                            }\r\n                        }\r\n                    }\r\n                });\r\n        }\r\n    }\r\n})();\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('app')\n\t\t.controller('ProfileController', ProfileController);\n\n\tProfileController.$inject = ['$state', 'Profile', 'auth'];\n\n\tfunction ProfileController($state, Profile, auth) {\n\t\tvar vm = this;\n\t\tvm.user = {\n\t\t\t\temail: null,\n\t\t\t\tgenre: null,\n\t\t\t\tlocation: null,\n\t\t\t\tpicture: null,\n\t\t\t\tfile: null,\n\t\t\t\tage: null,\n\t\t\t\tpreference: null,\n\t\t\t\tname: null\n\t\t\t},\n\n\t\t\tvm.getProfile = getProfile;\n\t\tvm.updateProfile = updateProfile;\n\t\tvm.uploadPhoto = uploadPhoto;\n\n\t\tif (navigator.geolocation) {\n\t\t\tnavigator.geolocation.getCurrentPosition((position) => {\n\t\t\t\tvm.user.location = [position.coords.latitude, position.coords.longitude];\n\t\t\t});\n\t\t};\n\n\t\tgetProfile();\n\n\t\tfunction getProfile() {\n\t\t\tProfile.getProfile().then(user => {\n\t\t\t\tvm.user.name = user.data.name;\n\t\t\t\tvm.user.email = user.data.email;\n\t\t\t\tvm.user.genre = user.data.genre;\n\t\t\t\tvm.user.age = user.data.age;\n\t\t\t\tvm.user.preference = user.data.preference;\n\t\t\t\tauth.getPhoto().then(photo => {\n\t\t\t\t\tvm.user.picture = photo;\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tfunction updateProfile() {\n\t\t\tif (vm.user.picture != null) {\n\t\t\t\tvm.user.picture = null;\n\t\t\t\tvm.user.file = null;\n\t\t\t}\n\t\t\tProfile.updateProfile(vm.user).then(() => {\n\t\t\t\t\tMaterialize.toast('Cadastro Atualizado com sucesso', 3000);\n\t\t\t\t\t$state.go('main.feed');\n\t\t\t\t},\n\t\t\t\t(err) => {\n\t\t\t\t\tMaterialize.toast('Erro ao Atualizar Cadastro', 3000);\n\t\t\t\t});\n\t\t};\n\n\t\tfunction uploadPhoto() {\n\t\t\tProfile.uploadPhoto(vm.user.file).then(() => {\n\t\t\t\tauth.getPhoto().then(photo => {\n\t\t\t\t\tvm.user.picture = photo;\n\t\t\t\t});\n\t\t\t\tMaterialize.toast('Imagem Atualizada com sucesso', 3000);\n\t\t\t});\n\t\t}\n\n\t}\n})();\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('app')\n\t\t.controller('ProfileCompanyController', ProfileCompanyController);\n\n\tProfileCompanyController.$inject = ['$state','ProfileCompany', 'auth'];\n\n\tfunction ProfileCompanyController($state, ProfileCompany, auth) {\n\t\tvar vm = this;\n\t\tvm.company = {\n\t\t\t\tname: null,\n\t\t\t\temail: null,\n\t\t\t\tphotos: null,\n\t\t\t\tadress: null,\n\t\t\t\tlocation: null,\n\t\t\t\trating: null,\n\t\t\t\tmapsUrl: null,\n\t\t\t\tcountry: null,\n\t\t\t\tuf: null,\n\t\t\t\treviews: null,\n\t\t\t\tphone: null,\n\t\t\t\tdays: null,\n\t\t\t\tdrinkPrice: null,\n\t\t\t\tsite: null,\n\t\t\t\tfile: null,\n\t\t\t\tpicture: null,\n\t\t\t};\n\n\t\tvm.getProfileCompany = getProfileCompany;\n\t\tvm.updateProfileCompany = updateProfileCompany;\n\t\tvm.uploadPhoto = uploadPhoto;\n\n\t\tgetProfileCompany();\n\n\t\tfunction getProfileCompany() {\n\t\t\tProfileCompany.getProfileCompany().then(company => {\n\t\t\t\tvm.company.name  = company.data.name;\n\t\t\t\tvm.company.email  = company.data.email;\n\t\t\t\tvm.company.photos = company.data.photo;\n\t\t\t\tvm.company.adress = company.data.adress;\n\t\t\t\tvm.company.rating = company.data.rating;\n\t\t\t\tvm.company.mapsUrl = company.data.mapsUrl;\n\t\t\t\tvm.company.county = company.data.country;\n\t\t\t\tvm.company.uf = company.data.uf;\n\t\t\t\tvm.company.reviews = company.data.reviews;\n\t\t\t\tvm.company.phone = company.data.phone;\n\t\t\t\tvm.company.days = company.data.days;\n\t\t\t\tvm.company.drinkPrice = company.data.drinkPrice;\n\t\t\t\tvm.company.site = company.data.site;\n\n\t\t\t\tauth.getPhoto().then(photo => {\n\t\t\t\t\tif(photo.status != 404){\n\t\t\t\t\tvm.company.picture = photo;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t};\n\n\t\tfunction updateProfileCompany() {\n\t\t\tif (vm.company.picture != null) {\n\t\t\t\tvm.company.picture = null;\n\t\t\t\tvm.company.photos = null;\n\t\t\t\tvm.company.file = null;\n\t\t\t}\n\t\t\tdebugger\n\t\t\tProfileCompany.updateProfileCompany(vm.company).then(() => {\n\t\t\t\tMaterialize.toast('Cadastro Atualizado com sucesso', 3000);\n\t\t\t\t\t $state.go('main.feed');\n\t\t\t\t},\n\t\t\t\t(err) => {\n\t\t\t\t\tMaterialize.toast('Erro ao Atualizar Cadastro', 3000);\n\t\t\t\t});\n\t\t};\n\n\t\tfunction uploadPhoto() {\n\t\t\tProfileCompany.uploadPhoto(vm.company.file).then(() => {\n\t\t\t\tauth.getPhoto().then(photo => {\n\t\t\t\t\tvm.company.picture = photo;\n\t\t\t\t});\n\t\t\t\tMaterialize.toast('Imagem Atualizada com sucesso', 3000);\n\t\t\t});\n\t\t}\n\n\t}\n})();\n(function () {\r\n\t'use strict';\r\n\r\n\tangular\r\n\t\t.module('app')\r\n\t\t.controller('RegisterController', RegisterController);\r\n\r\n\tRegisterController.$inject = ['auth', '$state'];\r\n\r\n\tfunction RegisterController(auth, $state) {\r\n\t\tvar vm = this;\r\n\t\tvm.user = {\r\n\t\t\temail: null,\r\n\t\t\tpassword: null,\r\n\t\t\tgenre: null,\r\n\t\t\ttype: 'user',\r\n\t\t};\r\n\t\tvm.register = register;\r\n\r\n\t\tfunction register() {\r\n\t\t\tif (vm.user.genre === null) {\r\n\t\t\t\tvm.user.genre = 'masculino';\r\n\t\t\t}\r\n\t\t\tauth.register(vm.user)\r\n\t\t\t\t.then(result => {\r\n\t\t\t\t\tif (result.status != 500) {\r\n\t\t\t\t\t\t$state.go('main.profile');\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tMaterialize.toast(result.data, 3000);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t};\r\n\t}\r\n})();\n(function () {\n\t'use strict';\n\n\tangular\n\t\t.module('app')\n\t\t.controller('RegisterCompanyController', RegisterCompanyController);\n\n\tRegisterCompanyController.$inject = ['auth', '$state'];\n\n\tfunction RegisterCompanyController(auth, $state) {\n\t\tvar vm = this;\n\t\tvm.company = {\n\t\t\temail: null,\n\t\t\tpassword: null,\n\t\t\ttype: 'company',\n\t\t};\n\t\tvm.registerCompany = registerCompany;\n\n\t\tfunction registerCompany() {\n\t\t\tauth.register(vm.company)\n\t\t\t\t.then(result => {\n\t\t\t\t\tif (result.status != 500) {\n\t\t\t\t\t\t$state.go('main.profileCompany');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tMaterialize.toast(result.data, 3000);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t};\n\t}\n})();\n(function ($) {\n    'use strict';\n\n    angular\n        .module('app')\n        .controller('TestController', TestController);\n\n    TestController.$inject = [];\n\n    function TestController() {\n        var vm = this;\n\n\n\n    }\n})(jQuery);\n\n"],"file":"script.js"}